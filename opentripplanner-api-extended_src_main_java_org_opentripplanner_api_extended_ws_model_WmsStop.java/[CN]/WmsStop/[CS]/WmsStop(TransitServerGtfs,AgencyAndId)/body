{
  calendar=Calendar.getInstance();
  GtfsRelationalDao dao=gtfs.getGtfsContext().getDao();
  Stop stop=dao.getStopForId(stopId);
  if (stop == null) {
    return;
  }
  this.name=stop.getName();
  this.stopId=stopId.getId();
  this.routes=new ArrayList<WmsRoute>();
  Set<String> routeIds=gtfs.getRouteIdsForStopId(stopId.toString());
  this.agencyId=stopId.getAgencyId();
  for (  String routeId : routeIds) {
    Route route=gtfs.getRoute(routeId);
    if (route != null) {
      this.routes.add(new WmsRoute(route));
    }
  }
  this.departures=getDeparturesForStop(gtfs,stop,3);
}
