{
  TraverseOptions options=new TraverseOptions(TraverseMode.WALK);
  options.walkReluctance=1;
  options.speed=1;
  addReachToGraph(graph);
  OverlayGraph walkGraph=makeWalkingGraph(graph,options);
  Set<Vertex> streetVertices=getWalkingVertices(walkGraph,options);
  options.setArriveBy(true);
  removeEdgeTrees(walkGraph,streetVertices,options);
  options.setArriveBy(false);
  removeEdgeTrees(walkGraph,streetVertices,options);
  partialTreesForStreets(walkGraph,streetVertices,options);
  inPenalty=outPenalty=null;
}
