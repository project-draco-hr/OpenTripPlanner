{
  HashMap<Class<? extends Edge>,Class<? extends Edge>> classMapping=new HashMap<Class<? extends Edge>,Class<? extends Edge>>();
  HashSet<Edge> edgesToRemove=new HashSet<Edge>();
  HashSet<Edge> edgesToAdd=new HashSet<Edge>();
  for (  Vertex vertex : graph.getVertices()) {
    for (    Edge e : vertex.getOutgoing()) {
      if (e instanceof StreetEdge) {
        StreetEdge se=((StreetEdge)e);
        edgesToRemove.add(se);
        edgesToAdd.add(reachifyEdge(graph,classMapping,se));
      }
    }
    for (    Edge e : vertex.getIncoming()) {
      if (edgesToRemove.contains(e)) {
        continue;
      }
      if (e instanceof StreetEdge) {
        StreetEdge se=((StreetEdge)e);
        edgesToRemove.add(se);
        edgesToAdd.add(reachifyEdge(graph,classMapping,se));
      }
    }
  }
  for (  Edge e : edgesToRemove) {
    e.detach();
  }
}
