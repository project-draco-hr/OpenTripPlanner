{
  Class<? extends DirectEdge> oldClass=e.getClass();
  Class<? extends DirectEdge> newClass=classMapping.get(oldClass);
  if (newClass == null) {
    String newClassName=oldClass.getName() + "WithReach";
    ClassCustomizer customizer=new ClassCustomizer(EdgeWithReach.class,oldClass.getName(),newClassName);
    customizer.setClassPath(graph.getBundle().getExtraClassPath());
    customizer.addDoubleField("reach");
    newClass=(Class<? extends DirectEdge>)customizer.saveClass();
    classMapping.put(oldClass,newClass);
  }
  EdgeWithReach newEdge=(EdgeWithReach)ClassCustomizer.reclass(e,newClass);
  newEdge.setReach(Double.MAX_VALUE);
  return newEdge;
}
