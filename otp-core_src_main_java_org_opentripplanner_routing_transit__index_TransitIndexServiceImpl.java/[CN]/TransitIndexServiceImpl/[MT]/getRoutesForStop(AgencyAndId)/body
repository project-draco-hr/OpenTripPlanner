{
  HashSet<AgencyAndId> routes=new HashSet<AgencyAndId>();
  for (  TripPattern pattern : getTripPatternsForStop(stop)) {
    if (pattern instanceof TripPattern) {
      routes.add(((TripPattern)pattern).getRoute().getId());
    }
 else     if (pattern instanceof FrequencyBasedTripPattern) {
      routes.add(((FrequencyBasedTripPattern)pattern).getTrip().getRoute().getId());
    }
  }
  return new ArrayList<AgencyAndId>(routes);
}
