{
  if (endVertex) {
    LOG.debug("Finding end vertex for {}",location);
  }
 else {
    LOG.debug("Finding start vertex for {}",location);
  }
  Coordinate coord=location.getCoordinate();
  TemporaryStreetLocation closest=new TemporaryStreetLocation("Start point " + Math.random(),coord,new NonLocalizedString("Start point " + Math.random()),endVertex);
  TraverseMode nonTransitMode=TraverseMode.WALK;
  if (options != null) {
    TraverseModeSet modes=options.modes;
    if (modes.getCar())     nonTransitMode=TraverseMode.CAR;
 else     if (modes.getWalk())     nonTransitMode=TraverseMode.WALK;
 else     if (modes.getBicycle())     nonTransitMode=TraverseMode.BICYCLE;
  }
  if (!link(closest,nonTransitMode)) {
    LOG.warn("Couldn't link {}",location);
  }
  return closest;
}
