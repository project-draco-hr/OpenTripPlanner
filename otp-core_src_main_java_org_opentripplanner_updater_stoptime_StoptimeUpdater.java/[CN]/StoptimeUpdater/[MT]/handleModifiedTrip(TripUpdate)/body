{
  tripUpdate.filter(true,true,true);
  if (!tripUpdate.isCoherent()) {
    LOG.warn("Incoherent TripUpdate, skipping.");
    return false;
  }
  if (tripUpdate.getUpdates().size() < 1) {
    LOG.warn("TripUpdate contains no updates after filtering, skipping.");
    return false;
  }
  TableTripPattern pattern=getPatternForTrip(tripUpdate.getTripId());
  if (pattern == null) {
    LOG.warn("No pattern found for tripId {}, skipping TripUpdate.",tripUpdate.getTripId());
    return false;
  }
  boolean applied=buffer.update(pattern,tripUpdate);
  return applied;
}
