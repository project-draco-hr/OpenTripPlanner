{
  List<Stop> stopsForLatLon=transitServerGtfs.getStopsForLatLon(latlon);
  if (stopsForLatLon.size() == 0) {
    throw new IllegalStateException("no stops found for latlon: " + latlon);
  }
  Stop stop=stopsForLatLon.get(0);
  String stopId=stop.getId().toString();
  this.setName(stop.getName());
  Set<String> routeIdsForStopId=transitServerGtfs.getRouteIdsForStopId(stopId);
  this.setDepartures(new TransitServerDepartures(latlon,nDepartures,transitServerGtfs));
  List<Route> routes=new ArrayList<Route>();
  for (  String routeId : routeIdsForStopId) {
    Route route=transitServerGtfs.getRoute(routeId);
    routes.add(route);
  }
  this.routes=new TransitServerDetailedRoutes(routes);
}
