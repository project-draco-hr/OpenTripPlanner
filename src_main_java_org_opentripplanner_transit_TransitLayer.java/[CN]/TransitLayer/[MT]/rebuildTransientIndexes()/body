{
  int nStops=stopIdForIndex.size();
  patternsForStop=new ArrayList<>(nStops);
  for (int i=0; i < nStops; i++) {
    patternsForStop.add(new TIntArrayList());
  }
  int p=0;
  for (  TripPattern pattern : tripPatterns) {
    for (    int stopIndex : pattern.stops) {
      if (!patternsForStop.get(stopIndex).contains(p)) {
        patternsForStop.get(stopIndex).add(p);
      }
    }
    p++;
  }
  stopForStreetVertex=new TIntIntHashMap();
  for (int s=0; s < streetVertexForStop.size(); s++) {
    stopForStreetVertex.put(streetVertexForStop.get(s),s);
  }
}
