{
  this.graph=graph;
  findEndpointVertices();
  setCalendarService(graph.getService(CalendarService.class));
  setTransferTable(graph.getTransferTable());
  setServiceDays(dateTime.getTime() / 1000,graph.getAgencyIds());
  if (getModes().getTransit() && !graph.transitFeedCovers(dateTime)) {
    throw new TransitTimesException();
  }
  remainingWeightHeuristic=_remainingWeightHeuristicFactory.getInstanceForSearch(this);
  LOG.debug("Applied A* heuristic: {}",remainingWeightHeuristic);
  if (!getModes().getTransit()) {
    numItineraries=1;
    setMaxWalkDistance(Double.MAX_VALUE);
  }
}
