{
  Graph gg=new Graph();
  try {
    File file=new File("src/test/resources/simple_streets/simple_streets.shp");
    DataStore dataStore=new ShapefileDataStore(file.toURI().toURL());
    String[] typeNames=dataStore.getTypeNames();
    String typeName=typeNames[0];
    FeatureSource<SimpleFeatureType,SimpleFeature> featureSource;
    featureSource=dataStore.getFeatureSource(typeName);
    ShapefileStreetLoader loader=new ShapefileStreetLoader(gg,featureSource);
    loader.load();
  }
 catch (  Exception e) {
    e.printStackTrace();
    assertNull("got an exception");
  }
  SpatialVertex northVertex=null;
  for (  Vertex v : gg.getVertices()) {
    if (v instanceof SpatialVertex) {
      SpatialVertex sv=(SpatialVertex)v;
      if (northVertex == null || sv.getCoordinate().y > northVertex.getCoordinate().y) {
        northVertex=sv;
      }
    }
  }
  SpatialVertex eastVertex=null;
  for (  Vertex v : gg.getVertices()) {
    if (v instanceof SpatialVertex) {
      SpatialVertex sv=(SpatialVertex)v;
      if (eastVertex == null || sv.getCoordinate().x > eastVertex.getCoordinate().x) {
        eastVertex=sv;
      }
    }
  }
  ShortestPathTree spt=Dijkstra.getShortestPathTree(gg,northVertex.label,eastVertex.label,new State(new GregorianCalendar(2009,8,7,12,0,0)),new WalkOptions());
  GraphPath path=spt.getPath(eastVertex);
  assertNotNull(path);
  Vector<SPTEdge> edges=path.edges;
  SPTEdge seventhAve=edges.elementAt(0);
  assertEquals("south",seventhAve.payload.getDirection());
  SPTEdge garfieldPl=edges.elementAt(1);
  assertEquals("east",garfieldPl.payload.getDirection());
  Narrative narrative=new Narrative(path);
  String direction=narrative.getSections().elementAt(0).getDirection();
  assertEquals("southeast",direction);
}
