{
  int nHops=runningTimes.length;
  int nStops=nHops + 1;
  int nTrips=departureTimes[0].size();
  this.exemplar=exemplar;
  this.tripTimes=new TripTimes[nTrips];
  boolean nullArrivals=arrivalTimes == null;
  for (int i=0; i < tripTimes.length; i++)   tripTimes[i]=new TripTimes(nStops,nullArrivals);
  this.zones=zones;
  this.perTripFlags=new int[nTrips];
  this.perStopFlags=perStopFlags;
  this.bestRunningTimes=new int[nHops];
  this.bestDwellTimes=nullArrivals ? null : new int[nHops];
  this.trips=new Trip[nTrips];
  for (int h=0; h < departureTimes.length; ++h) {
    for (int t=0; t < nTrips; ++t) {
      this.tripTimes[t].departureTimes[h]=departureTimes[h].get(t);
    }
  }
  if (!nullArrivals) {
    for (int h=0; h < nHops; ++h) {
      for (int t=0; t < nTrips; ++t) {
        this.tripTimes[t].arrivalTimes[h]=arrivalTimes[h].get(t);
      }
    }
    for (int h=1; h < nHops; ++h) {
      bestDwellTimes[h]=Integer.MAX_VALUE;
      for (int t=0; t < nTrips; ++t) {
        int dt=this.getDwellTime(h,t);
        if (bestDwellTimes[h] > dt) {
          bestDwellTimes[h]=dt;
        }
      }
    }
  }
  for (int h=0; h < nHops; ++h) {
    bestRunningTimes[h]=Integer.MAX_VALUE;
    for (int t=0; t < nTrips; ++t) {
      int rt=this.getRunningTime(h,t);
      if (bestRunningTimes[h] > rt) {
        bestRunningTimes[h]=rt;
      }
    }
  }
  if (headsigns != null) {
    this.headsigns=new String[nHops][nTrips];
    String[] nullRow=null;
    for (int s=0; s < nHops; ++s) {
      boolean rowIsNull=true;
      for (int t=0; t < headsigns[s].size(); ++t) {
        this.headsigns[s][t]=headsigns[s].get(t);
        if (this.headsigns[s][t] != null) {
          rowIsNull=false;
        }
      }
      if (rowIsNull) {
        if (nullRow == null) {
          nullRow=this.headsigns[s];
        }
 else {
          this.headsigns[s]=nullRow;
        }
      }
    }
  }
  for (int t=0; t < nTrips; ++t) {
    this.perTripFlags[t]=perTripFlags.get(t);
  }
  for (int t=0; t < nTrips; ++t) {
    this.trips[t]=trips.get(t);
  }
}
