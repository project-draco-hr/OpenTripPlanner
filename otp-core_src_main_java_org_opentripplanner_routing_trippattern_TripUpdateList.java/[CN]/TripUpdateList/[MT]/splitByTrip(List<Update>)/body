{
  List<TripUpdateList> ret=new ArrayList<TripUpdateList>();
  Collections.sort(mixedUpdates);
  List<Update> blockUpdates=new LinkedList<Update>();
  blockUpdates.add(mixedUpdates.remove(0));
  for (  Update u : mixedUpdates) {
    Update l=blockUpdates.get(0);
    if (!l.tripId.equals(u.tripId) || l.timestamp != u.timestamp || l.serviceDate != u.serviceDate) {
      TripUpdateList tripUpdateList=TripUpdateList.forUpdatedTrip(l.tripId,l.timestamp,l.serviceDate,blockUpdates);
      ret.add(tripUpdateList);
      blockUpdates=new LinkedList<Update>();
    }
    blockUpdates.add(u);
  }
  Update l=blockUpdates.get(0);
  TripUpdateList tripUpdateList=TripUpdateList.forUpdatedTrip(l.tripId,l.timestamp,l.serviceDate,blockUpdates);
  ret.add(tripUpdateList);
  return ret;
}
