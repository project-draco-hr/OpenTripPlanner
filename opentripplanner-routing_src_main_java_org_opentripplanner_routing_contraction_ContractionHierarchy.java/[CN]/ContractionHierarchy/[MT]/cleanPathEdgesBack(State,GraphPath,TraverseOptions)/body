{
  State state=init;
  double totalWeight=0;
  Collections.reverse(path.edges);
  SPTVertex prevVertex=path.edges.firstElement().getToVertex();
  for (  SPTEdge e : path.edges) {
    e.tov=prevVertex;
    e.tov.state=state;
    e.tov.weightSum=totalWeight;
    path.vertices.add(e.tov);
    TraverseResult result=e.traverseBack(state,options);
    state=result.state;
    SPTVertex fromv=e.getFromVertex();
    fromv.state=state;
    totalWeight+=result.weight;
    fromv.weightSum=totalWeight;
    prevVertex=fromv;
  }
  path.vertices.add(path.edges.lastElement().getFromVertex());
  Collections.reverse(path.edges);
  Collections.reverse(path.vertices);
}
