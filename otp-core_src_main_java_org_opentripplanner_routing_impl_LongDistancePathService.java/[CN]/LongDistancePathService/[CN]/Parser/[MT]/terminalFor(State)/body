{
  Edge e=state.getBackEdge();
  if (e == null) {
    throw new RuntimeException("terminalFor should never be called on States without back edges!");
  }
  if (e instanceof OnboardEdge)   return ONBOARD;
  if (e instanceof StationEdge)   return STATION;
  if (e instanceof StationStopEdge)   return STATION_STOP;
  if (e instanceof TimedTransferEdge)   return TRANSFER;
  if (e instanceof SimpleTransfer)   return TRANSFER;
  if (e instanceof TransferEdge)   return TRANSFER;
  if (e instanceof StreetTransitLink)   return LINK;
  return STREET;
}
