{
  for (  Route route : gtfs.getRoutes()) {
    String routeId=route.getId().toString();
    List<Stop> stops=gtfs.getStopsForRoute(routeId);
    List<ShapePoint> shapePoints=gtfs.getShapePointsForRoute(routeId);
    int n=shapePoints.size();
    List<ShapePoint> sortedShapePoints=new ArrayList<ShapePoint>();
    sortedShapePoints.addAll(shapePoints);
    Collections.sort(sortedShapePoints);
    double[] lat=new double[n];
    double[] lon=new double[n];
    int i=0;
    for (    ShapePoint sp : sortedShapePoints) {
      lat[i]=sp.getLat();
      lon[i]=sp.getLon();
      i++;
    }
    EncodedPolylineBean geometry=PolylineEncoder.createEncodings(lat,lon);
    routes.add(new TransitServerRoute(route,stops,geometry));
  }
}
