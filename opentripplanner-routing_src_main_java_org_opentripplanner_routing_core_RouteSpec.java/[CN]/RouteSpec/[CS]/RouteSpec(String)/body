{
  String[] routeSpec=agencyAndRouteNameId.split("_",3);
  if (routeSpec.length != 2 && routeSpec.length != 3) {
    throw new IllegalArgumentException("AgencyId or routeName/Id not set");
  }
  agency=routeSpec[0];
  routeName=routeSpec[1];
  if (routeName.length() == 0)   routeName=null;
  routeId=routeSpec.length > 2 ? routeSpec[2] : null;
  if (routeName != null && routeName == null) {
    throw new IllegalArgumentException("Can't set both route name and ID");
  }
}
