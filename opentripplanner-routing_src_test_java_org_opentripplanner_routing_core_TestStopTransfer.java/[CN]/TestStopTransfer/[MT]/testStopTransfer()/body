{
  Route fromRoute=new Route();
  fromRoute.setId(new AgencyAndId("A1","R1"));
  Trip fromTrip=new Trip();
  fromTrip.setId(new AgencyAndId("A1","T1"));
  fromTrip.setRoute(fromRoute);
  Route toRoute=new Route();
  toRoute.setId(new AgencyAndId("A1","R2"));
  Trip toTrip=new Trip();
  toTrip.setId(new AgencyAndId("A1","T2"));
  toTrip.setRoute(toRoute);
  Route toRoute2=new Route();
  toRoute2.setId(new AgencyAndId("A1","R3"));
  Trip toTrip2=new Trip();
  toTrip2.setId(new AgencyAndId("A1","T3"));
  toTrip2.setRoute(toRoute2);
  StopTransfer transfer=new StopTransfer();
  assertEquals(StopTransfer.UNKNOWN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip));
  assertEquals(StopTransfer.UNKNOWN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip2));
  transfer.addSpecificTransfer(new SpecificTransfer((AgencyAndId)null,null,null,null,StopTransfer.FORBIDDEN_TRANSFER));
  assertEquals(StopTransfer.FORBIDDEN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip));
  assertEquals(StopTransfer.FORBIDDEN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip2));
  transfer.addSpecificTransfer(new SpecificTransfer(null,toRoute2.getId(),null,null,StopTransfer.PREFERRED_TRANSFER));
  assertEquals(StopTransfer.FORBIDDEN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip));
  assertEquals(StopTransfer.PREFERRED_TRANSFER,transfer.getTransferTime(fromTrip,toTrip2));
  transfer.addSpecificTransfer(new SpecificTransfer(null,toRoute2.getId(),null,toTrip2.getId(),StopTransfer.TIMED_TRANSFER));
  assertEquals(StopTransfer.FORBIDDEN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip));
  assertEquals(StopTransfer.TIMED_TRANSFER,transfer.getTransferTime(fromTrip,toTrip2));
  transfer.addSpecificTransfer(new SpecificTransfer(fromRoute.getId(),toRoute2.getId(),fromTrip.getId(),null,StopTransfer.UNKNOWN_TRANSFER));
  assertEquals(StopTransfer.FORBIDDEN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip));
  assertEquals(StopTransfer.UNKNOWN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip2));
  transfer.addSpecificTransfer(new SpecificTransfer(fromRoute.getId(),null,null,null,3));
  assertEquals(3,transfer.getTransferTime(fromTrip,toTrip));
  assertEquals(StopTransfer.UNKNOWN_TRANSFER,transfer.getTransferTime(fromTrip,toTrip2));
}
