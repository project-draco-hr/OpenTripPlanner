{
  try {
    if (graph == null) {
      graph=Graph.load(new File(graphPath),Graph.LoadLevel.DEBUG);
      LOG.info("done loading graph.");
    }
  }
 catch (  Exception e) {
    LOG.error("Exception while loading graph from " + graphPath);
    e.printStackTrace();
    return;
  }
  if (outPath != null) {
    try {
      writer=new HTMLWriter(outPath);
    }
 catch (    FileNotFoundException ex) {
      java.util.logging.Logger.getLogger(AnnotationsToHTML.class.getName()).log(Level.SEVERE,null,ex);
      LOG.error("Exception while opening output file {}:{}",outPath,ex.getMessage());
      return;
    }
  }
 else {
    writer=new HTMLWriter(System.out);
  }
  if (fromStandalone) {
    annotationEndpoints.run();
  }
 else {
    String command=jc.getParsedCommand();
    if (command.equals("annotate")) {
      annotationEndpoints.run();
    }
  }
  if (outPath != null) {
    LOG.info("Annotated log is in {}",outPath);
  }
  writer.close();
}
