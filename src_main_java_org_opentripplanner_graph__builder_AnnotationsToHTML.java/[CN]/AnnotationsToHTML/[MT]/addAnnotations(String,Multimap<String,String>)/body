{
  try {
    HTMLWriter file_writer;
    if (current_map.keySet().size() == 1) {
      if (current_map.values().size() > 1.2 * maxNumberOfAnnotationsPerFile) {
        LOG.info("Number of annotations is very large. Splitting: {}",last_added_key);
        List<String> allAnnonations=new ArrayList<>(current_map.values());
        List<List<String>> partitions=Lists.partition(allAnnonations,maxNumberOfAnnotationsPerFile);
        for (        List<String> partition : partitions) {
          classOccurences.add(last_added_key);
          int labelCount=classOccurences.count(last_added_key);
          file_writer=new HTMLWriter(last_added_key + Integer.toString(labelCount),partition);
          writers.add(file_writer);
        }
      }
 else {
        classOccurences.add(last_added_key);
        int labelCount=classOccurences.count(last_added_key);
        file_writer=new HTMLWriter(last_added_key + Integer.toString(labelCount),current_map);
        writers.add(file_writer);
      }
    }
 else {
      classOccurences.add("rest");
      int labelCount=classOccurences.count("rest");
      file_writer=new HTMLWriter("rest" + labelCount,current_map);
      writers.add(file_writer);
    }
  }
 catch (  FileNotFoundException ex) {
    LOG.error("Output folder not found:{} {}",outPath,ex);
    return;
  }
}
