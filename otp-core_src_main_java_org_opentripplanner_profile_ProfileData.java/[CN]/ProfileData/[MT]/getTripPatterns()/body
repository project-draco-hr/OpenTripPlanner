{
  Set<TripPattern> tripPatterns=new HashSet<TripPattern>();
  for (  TransitStop ts : IterableLibrary.filter(graph.getVertices(),TransitStop.class)) {
    stops.add(ts.getStop());
    TransitStopDepart departVertex=null;
    for (    Edge e : ts.getOutgoing()) {
      if (e.getToVertex() instanceof TransitStopDepart) {
        departVertex=(TransitStopDepart)e.getToVertex();
        break;
      }
    }
    if (departVertex != null) {
      for (      Edge e : departVertex.getOutgoing()) {
        if (e.getToVertex() instanceof PatternStopVertex) {
          TripPattern tripPattern=((PatternStopVertex)e.getToVertex()).getTripPattern();
          tripPatterns.add(tripPattern);
        }
      }
    }
  }
  return tripPatterns;
}
