{
  StopCluster cluster=newRide.to;
  if (cluster == null) {
    cluster=newRide.from;
    newRide=newRide.previous;
  }
  if (newRide.durationLowerBound() > MAX_DURATION)   return false;
  for (  Ride oldRide : retainedRides.get(cluster)) {
    if (oldRide.to == null)     oldRide=oldRide.previous;
    if (oldRide.pathLength() < newRide.pathLength() && oldRide.durationLowerBound() < newRide.durationLowerBound() && oldRide.durationUpperBound() < newRide.durationUpperBound()) {
      return false;
    }
    if (newRide.durationLowerBound() > oldRide.durationUpperBound() + request.suboptimalMinutes) {
      return false;
    }
  }
  retainedRides.put(cluster,newRide);
  return true;
}
