{
  Vertex v=state.getVertex();
  Coordinate endCoord=v.getCoordinate();
  Place place;
  if (time) {
    Calendar timeAtState=makeCalendar(state);
    place=new Place(endCoord.x,endCoord.y,name,timeAtState);
  }
 else {
    place=new Place(endCoord.x,endCoord.y,name);
  }
  if (v instanceof TransitVertex) {
    TransitVertex transitVertex=(TransitVertex)v;
    Edge backEdge=state.getBackEdge();
    if (backEdge instanceof OnBoardForwardEdge) {
      place.stopIndex=((OnBoardForwardEdge)backEdge).getStopIndex() + 1;
    }
    place.stopId=transitVertex.getStopId();
    place.stopCode=transitVertex.getStopCode();
    place.platformCode=transitVertex.getPlatformCode();
    place.zoneId=state.getZone();
  }
  return place;
}
