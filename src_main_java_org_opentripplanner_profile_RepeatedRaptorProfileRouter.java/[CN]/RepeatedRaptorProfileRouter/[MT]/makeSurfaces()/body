{
  LOG.info("Propagating from transit stops to the street network...");
  StopTreeCache stopTreeCache=graph.index.getStopTreeCache();
  for (  TransitStop tstop : mins.keySet()) {
    int lb0=mins.get(tstop);
    int ub0=maxs.get(tstop);
    int avg0=(int)(accumulator.get(tstop) / counts.get(tstop));
    TObjectIntMap<Vertex> distanceToVertex=stopTreeCache.getDistancesForStop(tstop);
    for (TObjectIntIterator<Vertex> iter=distanceToVertex.iterator(); iter.hasNext(); ) {
      iter.advance();
      Vertex vertex=iter.key();
      int egressWalkTimeSeconds=(int)(iter.value() / request.walkSpeed);
      if (egressWalkTimeSeconds > request.maxWalkTime * 60) {
        continue;
      }
      int propagated_min=lb0 + egressWalkTimeSeconds;
      int propagated_max=ub0 + egressWalkTimeSeconds;
      int propagated_avg=avg0 + egressWalkTimeSeconds;
      int existing_min=timeSurfaceRangeSet.min.times.get(vertex);
      int existing_max=timeSurfaceRangeSet.max.times.get(vertex);
      int existing_avg=timeSurfaceRangeSet.avg.times.get(vertex);
      if (existing_min == TimeSurface.UNREACHABLE || existing_min > propagated_min) {
        timeSurfaceRangeSet.min.times.put(vertex,propagated_min);
      }
      if (existing_max == TimeSurface.UNREACHABLE || existing_max > propagated_max) {
        timeSurfaceRangeSet.max.times.put(vertex,propagated_max);
      }
      if (existing_avg == TimeSurface.UNREACHABLE || existing_avg > propagated_avg) {
        timeSurfaceRangeSet.avg.times.put(vertex,propagated_avg);
      }
    }
  }
  LOG.info("Done with propagation.");
}
