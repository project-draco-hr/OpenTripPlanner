{
  try {
    InputStream is=new FileInputStream(file);
    FeedMessage feed=GtfsRealtime.FeedMessage.parseFrom(is);
    FeedHeader header=feed.getHeader();
    long timestamp=header.getTimestamp();
    UpdateList updates=new UpdateList(null);
    for (    FeedEntity entity : feed.getEntityList()) {
      System.out.println(entity);
      TripUpdate tUpdate=entity.getTripUpdate();
      String trip=tUpdate.getTrip().getTripId();
      AgencyAndId tripId=new AgencyAndId("agency",trip);
      for (      StopTimeUpdate sUpdate : tUpdate.getStopTimeUpdateList()) {
        Update u=new Update(tripId,sUpdate.getStopId(),sUpdate.getStopSequence(),(int)sUpdate.getArrival().getTime(),(int)sUpdate.getDeparture().getTime());
        updates.addUpdate(u);
      }
    }
    return updates;
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
catch (  IOException e) {
    e.printStackTrace();
  }
  return null;
}
