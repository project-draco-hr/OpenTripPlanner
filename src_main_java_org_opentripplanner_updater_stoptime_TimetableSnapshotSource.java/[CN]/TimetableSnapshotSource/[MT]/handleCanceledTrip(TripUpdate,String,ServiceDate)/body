{
  boolean success=false;
  if (tripUpdate.getTrip().hasTripId()) {
    String tripId=tripUpdate.getTrip().getTripId();
    success=cancelScheduledTrip(tripId,serviceDate);
    if (!success) {
      success=cancelPreviouslyAddedTrip(tripId,serviceDate);
    }
    if (!success) {
      LOG.warn("No pattern found for tripId {}, skipping TripUpdate.",tripId);
    }
  }
 else {
    LOG.warn("No trip id in CANCELED trip update, skipping TripUpdate.");
  }
  return success;
}
