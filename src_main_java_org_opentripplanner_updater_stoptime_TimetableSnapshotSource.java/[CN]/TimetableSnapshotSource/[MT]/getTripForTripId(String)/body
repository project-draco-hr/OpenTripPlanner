{
  if (graphIndex.tripForIdWithoutAgency == null) {
    final Map<String,Trip> map=Maps.newHashMap();
    for (    final Trip trip : graphIndex.tripForId.values()) {
      final Trip previousValue=map.put(trip.getId().getId(),trip);
      if (previousValue != null) {
        LOG.warn("Duplicate trip id detected when agency is ignored for realtime" + "updates: {}",trip.getId().getId());
      }
    }
    graphIndex.tripForIdWithoutAgency=map;
  }
  final Trip trip=graphIndex.tripForIdWithoutAgency.get(tripId);
  return trip;
}
