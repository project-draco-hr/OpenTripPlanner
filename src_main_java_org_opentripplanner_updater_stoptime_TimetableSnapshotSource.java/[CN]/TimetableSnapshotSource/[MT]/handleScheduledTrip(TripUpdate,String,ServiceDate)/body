{
  TripDescriptor tripDescriptor=tripUpdate.getTrip();
  String tripId=tripDescriptor.getTripId();
  TripPattern pattern=getPatternForTripId(tripId);
  if (pattern == null) {
    LOG.warn("No pattern found for tripId {}, skipping TripUpdate.",tripId);
    return false;
  }
  if (tripUpdate.getStopTimeUpdateCount() < 1) {
    LOG.warn("TripUpdate contains no updates, skipping.");
    return false;
  }
  TripTimes updatedTripTimes=pattern.scheduledTimetable.createUpdatedTripTimes(tripUpdate,timeZone,serviceDate);
  if (updatedTripTimes == null) {
    return false;
  }
  boolean success=buffer.update(pattern,updatedTripTimes,serviceDate);
  return success;
}
