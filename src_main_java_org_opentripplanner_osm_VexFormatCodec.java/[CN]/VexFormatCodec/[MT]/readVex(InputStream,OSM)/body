{
  this.vin=CodedInputStream.newInstance(new GZIPInputStream(gzVexStream));
  this.osm=osm;
  byte[] header=vin.readRawBytes(HEADER.length());
  if (!Arrays.equals(header,HEADER.getBytes())) {
    throw new IOException("Corrupt header.");
  }
  boolean done=false;
  long nBlocks=0;
  while (!done) {
    done=readBlock();
    nBlocks+=1;
  }
  long expectedBlocks=vin.readUInt64();
  if (expectedBlocks != nBlocks) {
    throw new IOException("Did not read the expected number of blocks.");
  }
}
