{
  if (debug == null)   debug=false;
  if (precisionMeters == null)   precisionMeters=200;
  IsoChroneRequest isoChroneRequest=new IsoChroneRequest(cutoffSecList);
  isoChroneRequest.setIncludeDebugGeometry(debug);
  isoChroneRequest.setPrecisionMeters(precisionMeters);
  RoutingRequest sptRequest=buildRequest(0);
  List<IsochroneData> isochrones=renderer.getIsochrones(isoChroneRequest,sptRequest);
  StringWriter geoJsonWriter=new StringWriter();
  GeoJSONBuilder geoJsonBuilder=new GeoJSONBuilder(geoJsonWriter);
  geoJsonBuilder.array();
  for (  IsochroneData isochrone : isochrones) {
    geoJsonBuilder.object();
    geoJsonBuilder.key("type").value("Feature");
    geoJsonBuilder.key("properties").object();
    geoJsonBuilder.key("name").value("Isochrone " + isochrone.getCutoffSec() + " sec");
    geoJsonBuilder.endObject();
    geoJsonBuilder.key("geometry");
    geoJsonBuilder.writeGeom(isochrone.getGeometry());
    if (debug) {
      geoJsonBuilder.key("debugGeometry");
      geoJsonBuilder.writeGeom(isochrone.getDebugGeometry());
    }
    geoJsonBuilder.endObject();
  }
  geoJsonBuilder.endArray();
  CacheControl cc=new CacheControl();
  cc.setMaxAge(3600);
  cc.setNoCache(false);
  return Response.ok(geoJsonWriter.toString()).cacheControl(cc).build();
}
