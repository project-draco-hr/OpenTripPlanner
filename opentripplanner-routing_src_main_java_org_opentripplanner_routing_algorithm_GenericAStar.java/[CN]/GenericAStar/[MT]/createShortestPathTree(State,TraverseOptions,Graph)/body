{
  ShortestPathTree spt=null;
  if (_shortestPathTreeFactory != null)   spt=_shortestPathTreeFactory.create();
  if (spt == null) {
    if (options.getModes().getTransit() || options.getModes().getWalk() && options.getModes().getBicycle()) {
      spt=new MultiShortestPathTree();
      options.setServiceDays(init.getTime(),graph.getAgencyIds());
    }
 else {
      spt=new BasicShortestPathTree();
    }
  }
  return spt;
}
