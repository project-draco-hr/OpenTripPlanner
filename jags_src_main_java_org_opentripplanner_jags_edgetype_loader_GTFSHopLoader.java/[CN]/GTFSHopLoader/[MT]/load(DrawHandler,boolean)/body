{
  if (verbose) {
    System.out.println("Loading stops");
  }
  feed.loadStops();
  for (  Stop stop : feed.getAllStops()) {
    graph.addVertex(new SpatialVertex(stop.stop_id,stop.stop_lon,stop.stop_lat));
  }
  feed.loadRoutes();
  if (verbose) {
    System.out.println("Loading hops");
  }
  GTFSHopFactory hf=new GTFSHopFactory(feed);
  ArrayList<Hop> hops=hf.run(verbose);
  for (  Hop hop : hops) {
    if (drawHandler != null) {
      drawHandler.handle(hop);
    }
    Vertex start=graph.addVertex(hop.start.stop_id);
    start.isTransitStop=true;
    Vertex end=graph.addVertex(hop.end.stop_id);
    end.isTransitStop=true;
    graph.addEdge(start,end,hop);
  }
}
