{
  RoutingRequest options=s0.getOptions();
  if (!options.getBannedStopsHard().isEmpty()) {
    if (options.getBannedStopsHard().matches(((TransitVertex)fromv).getStop()) || options.getBannedStopsHard().matches(((TransitVertex)tov).getStop())) {
      return null;
    }
  }
  int runningTime=pattern.getRunningTime(stopIndex);
  StateEditor s1=s0.edit(this);
  s1.incrementTimeInSeconds(runningTime);
  if (s0.getOptions().isArriveBy())   s1.setZone(getBeginStop().getZoneId());
 else   s1.setZone(getEndStop().getZoneId());
  s1.setRoute(pattern.getTrip().getRoute().getId());
  s1.setBackMode(getMode());
  s1.incrementWeight(runningTime);
  return s1.makeState();
}
