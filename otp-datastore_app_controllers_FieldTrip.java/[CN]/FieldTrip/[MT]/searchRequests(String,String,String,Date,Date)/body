{
  TrinetUser user=checkLogin();
  checkAccess(user);
  System.out.println("search: " + query);
  List<FieldTripRequest> requests;
  if (date2 == null)   requests=FieldTripRequest.find(query,teacherValue,schoolValue,date1).fetch();
 else   requests=FieldTripRequest.find(query,teacherValue,schoolValue,date1,date2).fetch();
  Gson gson=new GsonBuilder().excludeFieldsWithoutExposeAnnotation().serializeNulls().create();
  renderJSON(gson.toJson(requests));
}
