{
  TrinetUser user=checkLogin();
  checkAccess(user);
  FieldTripRequest req=FieldTripRequest.findById(requestId);
  if (req != null) {
    req.status=status;
    req.save();
    if (status.equals("cancelled")) {
      for (      ScheduledFieldTrip trip : req.trips) {
        trip.delete();
      }
    }
    renderJSON(requestId);
  }
 else {
    badRequest();
  }
}
