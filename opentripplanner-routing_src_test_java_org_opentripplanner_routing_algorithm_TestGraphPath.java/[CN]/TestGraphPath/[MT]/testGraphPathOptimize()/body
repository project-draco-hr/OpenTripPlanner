{
  Vertex stop_a=graph.getVertex("agency_A");
  Vertex stop_e=graph.getVertex("agency_E");
  TraverseOptions options=new TraverseOptions();
  options.setGtfsContext(context);
  ShortestPathTree spt;
  GraphPath path;
  spt=Dijkstra.getShortestPathTree(graph,stop_a.getLabel(),stop_e.getLabel(),new State(new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis()),options);
  path=spt.getPath(stop_e,false);
  assertNotNull(path);
  assertEquals(10,path.vertices.size());
  long bestStart=new GregorianCalendar(2009,8,7,0,20,0).getTimeInMillis();
  assertNotSame(bestStart,path.vertices.firstElement().state.getTime());
  path.optimize();
  assertEquals(bestStart,path.vertices.firstElement().state.getTime());
}
