{
  if (geom instanceof Point) {
    lats[featureCount]=geom.getCoordinate().y;
    lons[featureCount]=geom.getCoordinate().x;
  }
 else   if (geom instanceof Polygon) {
    Point p=geom.getCentroid();
    lats[featureCount]=p.getCoordinate().y;
    lons[featureCount]=p.getCoordinate().x;
    polygons[featureCount]=geom;
  }
 else   if (geom instanceof MultiPolygon) {
    if (geom.getNumGeometries() > 1)     return;
    Point p=geom.getGeometryN(0).getCentroid();
    lats[featureCount]=p.getCoordinate().y;
    lons[featureCount]=p.getCoordinate().x;
    polygons[featureCount]=(Polygon)geom.getGeometryN(0);
  }
 else   return;
  ids[featureCount]=id;
  for (  AttributeData d : data) {
    Attribute attr=getAttributeForColumn(d.id,"default",true);
    if (attr == null)     continue;
    if (attr.magnitudes == null)     attr.magnitudes=new int[nFeatures];
    attr.magnitudes[featureCount]=d.value;
  }
  featureCount++;
}
