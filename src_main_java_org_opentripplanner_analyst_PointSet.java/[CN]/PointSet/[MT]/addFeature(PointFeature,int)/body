{
  if (index >= capacity) {
    throw new AssertionError("Number of features seems to have grown since validation.");
  }
  polygons[index]=feat.getPolygon();
  lats[index]=feat.getLat();
  lons[index]=feat.getLon();
  ids[index]=feat.getId();
  for (  Entry<String,Integer> ad : feat.getAttributes().entrySet()) {
    String attrId=ad.getKey();
    Integer attrVal=ad.getValue();
    Attribute attr=getAttributeFor(attrId);
    if (attr == null)     continue;
    if (attr.magnitudes == null)     attr.magnitudes=new int[capacity];
    attr.magnitudes[index]=attrVal;
  }
}
