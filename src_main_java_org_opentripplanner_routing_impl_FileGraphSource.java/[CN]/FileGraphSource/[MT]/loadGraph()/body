{
  LOG.debug("Loading serialized graph for routerId {}",routerId);
  String graphFileName=new File(path,GRAPH_FILENAME).getPath();
  String configFileName=new File(path,CONFIG_FILENAME).getPath();
  LOG.debug("Graph file for routerId '{}' is at {}",routerId,graphFileName);
  InputStream is=getGraphInputStream(graphFileName);
  if (is == null) {
    LOG.warn("Graph file not found or not openable for routerId '{}' under {}",routerId,graphFileName);
    return null;
  }
  LOG.info("Loading graph...");
  Graph graph=null;
  try {
    graph=Graph.load(new ObjectInputStream(is),loadLevel,streetVertexIndexFactory);
  }
 catch (  Exception ex) {
    LOG.error("Exception while loading graph from {}.",graphFileName);
    ex.printStackTrace();
    return null;
  }
  graph.routerId=(routerId);
  try {
    is=getConfigInputStream(configFileName);
    Preferences config=is == null ? null : new PropertiesPreferences(is);
    decorator.setupGraph(graph,config);
  }
 catch (  IOException e) {
    LOG.error("Can't read config file",e);
  }
  return graph;
}
