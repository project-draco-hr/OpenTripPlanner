{
  Graph graph=getGraph(routerId);
  TransitIndexService transitIndexService=graph.getService(TransitIndexService.class);
  if (transitIndexService == null) {
    return new TransitError("No transit index found. Add TransitIndexBuilder to your graph builder " + "configuration and rebuild your graph.");
  }
  StopList response=new StopList();
  AgencyAndId stopId=new AgencyAndId(agency,id);
  Map<AgencyAndId,Stop> allStops=transitIndexService.getAllStops();
  for (  Map.Entry<AgencyAndId,Stop> entry : allStops.entrySet()) {
    if (entry.getKey().equals(stopId)) {
      response.stops.add(new StopType(entry.getValue(),extended));
    }
  }
  return response;
}
