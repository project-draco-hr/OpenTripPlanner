{
  TransitIndexService transitIndexService=getGraph(routerId).getService(TransitIndexService.class);
  if (transitIndexService == null) {
    return new TransitError("No transit index found.  Add TransitIndexBuilder to your graph builder configuration and rebuild your graph.");
  }
  RouteData response=new RouteData();
  AgencyAndId routeId=new AgencyAndId(agency,id);
  response.id=routeId;
  List<RouteVariant> variants=transitIndexService.getVariantsForRoute(routeId);
  response.variants=variants;
  response.directions=new ArrayList<String>(transitIndexService.getDirectionsForRoute(routeId));
  if (references != null && references.equals(true)) {
    response.stops=new ArrayList<StopType>();
    for (    org.onebusaway.gtfs.model.Stop stop : transitIndexService.getStopsForRoute(routeId))     response.stops.add(new StopType(stop,extended));
  }
  return response;
}
