{
  TraverseModeSet modes=new TraverseModeSet();
  if (sets.isEmpty())   return;
  Set<QualifiedMode> qModes=sets.get(0);
  for (  QualifiedMode qMode : qModes) {
    modes.setMode(qMode.mode,true);
  }
  for (  QualifiedMode qMode : qModes) {
    if (qMode.mode == TraverseMode.BICYCLE) {
      if (qMode.qualifiers.contains(Qualifier.RENT)) {
        modes.setMode(TraverseMode.WALK,true);
        req.allowBikeRental=true;
      }
      if (modes.isTransit()) {
        req.bikeParkAndRide=qMode.qualifiers.contains(Qualifier.PARK);
      }
    }
    if (qMode.mode == TraverseMode.CAR && modes.isTransit()) {
      if (qMode.qualifiers.contains(Qualifier.PARK)) {
        req.parkAndRide=true;
      }
 else {
        req.kissAndRide=true;
      }
    }
  }
  req.setModes(modes);
}
