{
  if (way.nodes.length == 0)   return;
  for (  long nid : way.nodes) {
    if (referenced.contains(nid)) {
      intersections.add(nid);
    }
 else {
      referenced.add(nid);
    }
  }
  long firstNodeId=way.nodes[0];
  Node firstNode=osm.nodes.get(firstNodeId);
  if (firstNode == null) {
    LOG.error("A way referenced a node that was not yet included in the input.");
  }
 else {
    WebMercatorTile tile=new WebMercatorTile(firstNode.lat,firstNode.lon);
    osm.index.add(new Tuple3(tile.xtile,tile.ytile,wayId));
  }
  super.handleWay(wayId,way);
}
