{
  StreetVertexIndexServiceImpl finder=new StreetVertexIndexServiceImpl(graph);
  finder.setup();
  assertTrue(finder.getClosestVertex(graph,new Coordinate(-74.05000001,40.1),null) instanceof TransitStop);
  StreetLocation start=(StreetLocation)finder.getClosestVertex(graph,new Coordinate(-74.1,40.04),null);
  assertNotNull(start);
  ArrayList<Edge> extra=new ArrayList<Edge>();
  for (  Edge e : start.getExtra()) {
    extra.add(e);
  }
  assertEquals(12,extra.size());
  TraverseOptions biking=new TraverseOptions(new TraverseModeSet(TraverseMode.BICYCLE));
  StreetLocation end=(StreetLocation)finder.getClosestVertex(graph,new Coordinate(-74.0,40.08),biking);
  assertNotNull(end);
  extra.clear();
  for (  Edge e : end.getExtra()) {
    extra.add(e);
  }
  assertEquals(6,extra.size());
}
