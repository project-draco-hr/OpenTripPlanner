{
  Graph gg=new Graph();
  Vertex start=gg.addVertex("start",-74.002,40.5);
  Vertex end=gg.addVertex("end",-74.004,40.5);
  TraverseOptions wo=new TraverseOptions();
  wo.speed=ConstantsForTests.WALKING_SPEED;
  double streetLength=100;
  Edge ee=gg.addEdge(start,end,new Street(streetLength));
  GregorianCalendar startTime=new GregorianCalendar(2009,9,21,13,0,0);
  GregorianCalendar endTime=(GregorianCalendar)startTime.clone();
  int expectedSecElapsed=(int)(streetLength / wo.speed);
  endTime.add(GregorianCalendar.SECOND,expectedSecElapsed);
  State s0=new State(startTime.getTimeInMillis());
  TraverseResult wr=ee.traverse(s0,wo);
  assertNotNull(wr);
  assertEquals(wr.weight,streetLength / wo.speed);
  assertEquals(wr.state.getTime(),endTime.getTimeInMillis());
  wr=null;
  s0=new State(endTime.getTimeInMillis());
  wr=ee.traverseBack(s0,wo);
  assertNotNull(wr);
  assertEquals(wr.weight,streetLength / wo.speed);
  assertEquals(wr.state.getTime(),startTime.getTimeInMillis());
}
