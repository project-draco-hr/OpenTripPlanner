{
  while (true) {
    UpdateList updates=updateStreamer.getUpdates();
    if (updates == null)     continue;
    for (    UpdateList ul : updates.splitByTrip()) {
      LOG.trace(ul.toString());
      if (!ul.isSane()) {
        LOG.trace("incoherent stoptime UpdateList");
        continue;
      }
      TableTripPattern pattern=patternForTripId.get(ul.tripId);
      if (pattern != null) {
        LOG.trace("pattern found for {}",ul.tripId);
        pattern.update(ul);
      }
 else {
        LOG.trace("pattern not found {}",ul.tripId);
      }
    }
  }
}
