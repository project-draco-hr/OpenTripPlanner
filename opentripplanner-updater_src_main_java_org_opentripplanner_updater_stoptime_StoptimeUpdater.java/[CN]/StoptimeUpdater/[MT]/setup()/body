{
  Graph g=graphService.getGraph();
  patternForTripId=new HashMap<AgencyAndId,TableTripPattern>();
  for (  TransitStopDepart tsd : filter(g.getVertices(),TransitStopDepart.class)) {
    for (    PatternBoard pb : filter(tsd.getOutgoing(),PatternBoard.class)) {
      TableTripPattern pattern=pb.getPattern();
      for (      Trip trip : pattern.getTrips()) {
        patternForTripId.put(trip.getId(),pattern);
      }
    }
  }
}
