{
  if (elev == null || elev.size() < 2) {
    return;
  }
  if (slopeOverride) {
    elev=new PackedCoordinateSequence.Float(new Coordinate[]{elev.getCoordinate(0),elev.getCoordinate((elev.size() - 1))},2);
  }
  elevationProfile=elev;
  double lengthMultiplier=ElevationUtils.getLengthMultiplierFromElevation(elev);
  length*=lengthMultiplier;
  bicycleSafetyEffectiveLength*=lengthMultiplier;
  SlopeCosts costs=ElevationUtils.getSlopeCosts(elev,getName());
  slopeSpeedEffectiveLength=costs.slopeSpeedEffectiveLength;
  maxSlope=costs.maxSlope;
  slopeWorkCost=costs.slopeWorkCost;
  bicycleSafetyEffectiveLength+=costs.slopeSafetyCost;
}
