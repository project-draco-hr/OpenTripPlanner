{
  File clientDir=Files.createTempDir();
  File clientWar=new File(clientDir,CLIENT_WAR_FILENAME);
  boolean fallback=false;
  try {
    Files.copy(new ClientWarSupplier(),clientWar);
    ZipFile zip=new ZipFile(clientWar);
    zip.extractAll(clientDir.toString());
  }
 catch (  Exception e) {
    LOG.error("Error copying or expanding client WAR: {}",e.getMessage());
    for (    String fallbackClientDir : FALLBACK_CLIENT_DIRS) {
      File f=new File(fallbackClientDir);
      if (f.isDirectory() && f.canRead()) {
        clientDir=f;
        LOG.info("Found fallback client files at {}",f);
        break;
      }
    }
  }
  LOG.info("Serving static client files from {}",clientDir);
  return new StaticHttpHandler(clientDir.toString());
}
