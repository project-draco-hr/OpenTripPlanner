{
  Vertex stop_a=graph.getVertex("agency_A");
  Vertex stop_b=graph.getVertex("agency_B");
  Vertex stop_c=graph.getVertex("agency_C");
  Vertex stop_d=graph.getVertex("agency_D");
  Vertex stop_e=graph.getVertex("agency_E");
  TraverseOptions options=new TraverseOptions();
  options.setGtfsContext(context);
  ShortestPathTree spt;
  GraphPath path;
  spt=AStar.getShortestPathTree(graph,stop_a.getLabel(),stop_b.getLabel(),new State(new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis()),options);
  path=spt.getPath(stop_b);
  assertNotNull(path);
  assertEquals(4,path.vertices.size());
  spt=AStar.getShortestPathTree(graph,stop_a.getLabel(),stop_c.getLabel(),new State(new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis()),options);
  path=spt.getPath(stop_c);
  assertNotNull(path);
  assertEquals(6,path.vertices.size());
  spt=AStar.getShortestPathTree(graph,stop_a.getLabel(),stop_d.getLabel(),new State(new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis()),options);
  path=spt.getPath(stop_d);
  assertNotNull(path);
  assertTrue(path.vertices.size() <= 9);
  long endTime=new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis() + 40 * 60 * 1000;
  assertEquals(endTime,path.vertices.lastElement().state.getTime());
  spt=AStar.getShortestPathTree(graph,stop_a.getLabel(),stop_e.getLabel(),new State(new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis()),options);
  path=spt.getPath(stop_e);
  assertNotNull(path);
  assertTrue(path.vertices.size() <= 10);
  endTime=new GregorianCalendar(2009,8,7,0,0,0).getTimeInMillis() + 70 * 60 * 1000;
  assertEquals(endTime,path.vertices.lastElement().state.getTime());
}
