{
  updaterManager.executeBlocking(new GraphWriterRunnable(){
    @Override public void run(    Graph graph){
      RealtimeDataSnapshotSource snapshotSource=graph.getRealtimeDataSnapshotSource();
      if (snapshotSource == null) {
        snapshotSource=new RealtimeDataSnapshotSource(graph);
        graph.setRealtimeDataSnapshotSource(snapshotSource);
      }
      if (logFrequency != null) {
        snapshotSource.setLogFrequency(logFrequency);
      }
      if (maxSnapshotFrequency != null) {
        snapshotSource.setMaxSnapshotFrequency(maxSnapshotFrequency);
      }
      if (purgeExpiredData != null) {
        snapshotSource.setPurgeExpiredData(purgeExpiredData);
      }
    }
  }
);
}
