{
  Coordinate[] coordinates=elev.toCoordinateArray();
  double maxSlope=0;
  double slopeSpeedEffectiveLength=0;
  double slopeWorkCost=0;
  for (int i=0; i < coordinates.length - 1; ++i) {
    double run=coordinates[i + 1].x - coordinates[i].x;
    double rise=coordinates[i + 1].y - coordinates[i].y;
    double slope=rise / run;
    if (slope > 0.35 || slope < -0.35) {
      slope=0;
      log.warn("Warning: street " + name + " steeper than Baldwin Street.  This is an error in the algorithm or the data");
    }
    if (maxSlope < Math.abs(slope)) {
      maxSlope=Math.abs(slope);
    }
    double slope_or_zero=Math.max(slope,0);
    double joules=run * (JOULES_PER_METER_ON_FLAT + JOULES_SLOPE_FACTOR * slope_or_zero);
    slopeWorkCost+=joules * WORK_NORMALIZATION_FACTOR;
    slopeSpeedEffectiveLength+=run * slopeSpeedCoefficient(slope,coordinates[i].y);
  }
  return new SlopeCosts(slopeSpeedEffectiveLength,slopeWorkCost,maxSlope);
}
