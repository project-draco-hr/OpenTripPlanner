{
  Vertex stop_g=graph.getVertex("agency_G_depart");
  Vertex stop_h=graph.getVertex("agency_H_arrive");
  TraverseOptions options=new TraverseOptions();
  options.setGtfsContext(context);
  ShortestPathTree spt;
  GraphPath path;
  spt=AStar.getShortestPathTree(graph,stop_g.getLabel(),stop_h.getLabel(),new State(new GregorianCalendar(2009,8,18,23,20,0).getTimeInMillis()),options);
  path=spt.getPath(stop_h);
  assertNotNull(path);
  assertEquals(4,path.vertices.size());
  long startTime=new GregorianCalendar(2009,8,19,0,5,0).getTimeInMillis();
  spt=AStar.getShortestPathTree(graph,stop_g.getLabel(),stop_h.getLabel(),new State(startTime),options);
  path=spt.getPath(stop_h);
  assertNotNull(path);
  assertEquals(4,path.vertices.size());
  long endTime=path.vertices.lastElement().state.getTime();
  assertTrue(endTime < startTime + 1000 * 60 * 60);
}
