{
  XmlDataListDownloader<DataTest> xmlDataListDownloader=new XmlDataListDownloader<DataTest>();
  xmlDataListDownloader.setPath("//*[local-name()='kml']/*[local-name()='Document']/*[local-name()='Placemark']");
  xmlDataListDownloader.setDataFactory(new XmlDataFactory<DataTest>(){
    @Override public DataTest build(    Map<String,String> attributes){
      DataTest t=new DataTest();
      t.name=attributes.get("name");
      String[] coords=attributes.get("Point").trim().split(",");
      t.lon=Double.parseDouble(coords[0]);
      t.lat=Double.parseDouble(coords[1]);
      return t;
    }
  }
);
  List<DataTest> data=xmlDataListDownloader.download("file:src/test/resources/bike/NSFietsenstallingen.kml");
  assertEquals(5,data.size());
  for (  DataTest dt : data) {
    System.out.println(String.format("%s (%.6f,%.6f)",dt.name,dt.lat,dt.lon));
  }
  DataTest alkmaar=data.get(0);
  DataTest zwolle=data.get(4);
  assertEquals("Station Alkmaar",alkmaar.name);
  assertEquals("Station Zwolle",zwolle.name);
  assertTrue(alkmaar.lat >= 52.637531 && alkmaar.lat <= 52.637532);
  assertTrue(alkmaar.lon >= 4.739850 && alkmaar.lon <= 4.739851);
  assertTrue(zwolle.lat >= 52.504990 && zwolle.lat <= 52.504991);
  assertTrue(zwolle.lon >= 6.091060 && zwolle.lon <= 6.091061);
}
