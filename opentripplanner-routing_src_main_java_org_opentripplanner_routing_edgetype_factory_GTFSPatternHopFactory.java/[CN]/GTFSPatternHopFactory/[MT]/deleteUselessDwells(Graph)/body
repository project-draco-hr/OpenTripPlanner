{
  HashSet<BasicTripPattern> possiblySimplePatterns=new HashSet<BasicTripPattern>();
  HashSet<BasicTripPattern> notSimplePatterns=new HashSet<BasicTripPattern>();
  for (  PatternDwell dwell : potentiallyUselessDwells) {
    BasicTripPattern pattern=(BasicTripPattern)dwell.getPattern();
    boolean useless=true;
    for (int i=0; i < pattern.getNumDwells(); ++i) {
      if (pattern.getDwellTime(dwell.getStopIndex(),i) != 0) {
        useless=false;
        break;
      }
    }
    if (!useless) {
      possiblySimplePatterns.remove(pattern);
      notSimplePatterns.add(pattern);
      continue;
    }
    Vertex v=dwell.getFromVertex();
    v.mergeFrom(graph,dwell.getToVertex());
    if (!notSimplePatterns.contains(pattern)) {
      possiblySimplePatterns.add(pattern);
    }
  }
  for (  BasicTripPattern pattern : possiblySimplePatterns) {
    pattern.simplify();
  }
}
