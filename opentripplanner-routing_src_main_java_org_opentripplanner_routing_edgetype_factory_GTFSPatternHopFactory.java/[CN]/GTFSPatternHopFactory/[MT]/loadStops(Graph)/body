{
  for (  Stop stop : _dao.getAllStops()) {
    if (stops.contains(stop)) {
      continue;
    }
    stops.add(stop);
    TransitStop stopVertex=new TransitStop(graph,stop);
    stopVertex.setStreetToStopTime(defaultStreetToStopTime);
    stopNodes.put(stop,stopVertex);
    if (stop.getLocationType() != 2) {
      TransitStopArrive arrive=new TransitStopArrive(graph,stop);
      stopArriveNodes.put(stop,arrive);
      TransitStopDepart depart=new TransitStopDepart(graph,stop);
      stopDepartNodes.put(stop,depart);
      new PreAlightEdge(arrive,stopVertex);
      new PreBoardEdge(stopVertex,depart);
    }
  }
  for (  Stop stop : _dao.getAllStops()) {
    String parentStation=stop.getParentStation();
    if (parentStation != null) {
      Vertex stopVertex=stopNodes.get(stop);
      String agencyId=stop.getId().getAgencyId();
      AgencyAndId parentStationId=new AgencyAndId(agencyId,parentStation);
      Stop parentStop=_dao.getStopForId(parentStationId);
      Vertex parentStopVertex=stopNodes.get(parentStop);
      new FreeEdge(parentStopVertex,stopVertex);
      new FreeEdge(stopVertex,parentStopVertex);
      Vertex stopArriveVertex=stopArriveNodes.get(stop);
      Vertex parentStopArriveVertex=stopArriveNodes.get(parentStop);
      new FreeEdge(parentStopArriveVertex,stopArriveVertex);
      new FreeEdge(stopArriveVertex,parentStopArriveVertex);
      Vertex stopDepartVertex=stopDepartNodes.get(stop);
      Vertex parentStopDepartVertex=stopDepartNodes.get(parentStop);
      new FreeEdge(parentStopDepartVertex,stopDepartVertex);
      new FreeEdge(stopDepartVertex,parentStopDepartVertex);
    }
  }
}
