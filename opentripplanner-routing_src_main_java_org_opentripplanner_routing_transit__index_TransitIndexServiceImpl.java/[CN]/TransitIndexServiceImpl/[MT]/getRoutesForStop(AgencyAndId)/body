{
  HashSet<AgencyAndId> out=new HashSet<AgencyAndId>();
  Edge edge=preBoardEdges.get(stop);
  if (edge == null)   return new ArrayList<AgencyAndId>();
  for (  Edge e : edge.getToVertex().getOutgoing()) {
    if (e instanceof TransitBoardAlight && ((TransitBoardAlight)e).isBoarding()) {
      TransitBoardAlight board=(TransitBoardAlight)e;
      for (      Trip t : board.getPattern().getTrips()) {
        out.add(t.getRoute().getId());
      }
    }
    if (e instanceof FrequencyBoard) {
      FrequencyBoard board=(FrequencyBoard)e;
      out.add(board.getPattern().getTrip().getRoute().getId());
    }
  }
  return new ArrayList<AgencyAndId>(out);
}
