{
  Vertex v=state.getVertex();
  Coordinate endCoord=v.getCoordinate();
  String name=v.getName();
  AgencyAndId stopId=null;
  String stopCode=null;
  if (v instanceof TransitVertex) {
    stopId=((TransitVertex)v).getStopId();
    stopCode=((TransitVertex)v).getStopCode();
  }
  Date timeAtState=new Date(state.getTimeInMillis());
  Place place=new Place(endCoord.x,endCoord.y,name,stopId,stopCode,timeAtState);
  return place;
}
