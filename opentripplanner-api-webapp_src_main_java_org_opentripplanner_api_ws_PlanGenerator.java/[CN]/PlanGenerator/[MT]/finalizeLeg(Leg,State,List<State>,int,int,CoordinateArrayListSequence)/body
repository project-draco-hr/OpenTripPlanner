{
  if (start != -1) {
    leg.walkSteps=getWalkSteps(states.subList(start,end + 1));
  }
  leg.endTime=new Date(state.getBackState().getTimeInMillis());
  Geometry geometry=geometryFactory.createLineString(coordinates);
  leg.legGeometry=PolylineEncoder.createEncodings(geometry);
  leg.to=makePlace(state);
  coordinates.clear();
}
