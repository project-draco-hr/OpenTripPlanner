{
  Edge en=state.getBackEdge();
  leg.route=en.getName();
  Trip trip=state.getBackTrip();
  leg.headsign=state.getBackDirection();
  if (trip != null) {
    if (leg.headsign == null)     leg.headsign=trip.getTripHeadsign();
    leg.tripId=trip.getId().getId();
    leg.agencyId=trip.getId().getAgencyId();
    leg.tripShortName=trip.getTripShortName();
    leg.routeShortName=trip.getRoute().getShortName();
    leg.routeLongName=trip.getRoute().getLongName();
    leg.routeColor=trip.getRoute().getColor();
    leg.routeTextColor=trip.getRoute().getTextColor();
    leg.routeId=trip.getRoute().getId().getId();
    leg.routeType=trip.getRoute().getType();
    if (transitIndex != null) {
      Agency agency=transitIndex.getAgency(leg.agencyId);
      leg.agencyName=agency.getName();
      leg.agencyUrl=agency.getUrl();
    }
  }
  leg.mode=state.getBackMode().toString();
  leg.startTime=makeCalendar(state.getBackState());
}
