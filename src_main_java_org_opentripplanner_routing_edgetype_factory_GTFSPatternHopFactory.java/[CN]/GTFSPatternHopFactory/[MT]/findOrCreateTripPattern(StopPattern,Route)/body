{
  for (  TripPattern tripPattern : tripPatterns.get(stopPattern)) {
    if (tripPattern.route.equals(route)) {
      return tripPattern;
    }
  }
  TripPattern tripPattern=new TripPattern(route,stopPattern);
  tripPatterns.put(stopPattern,tripPattern);
  return tripPattern;
}
