{
  AgencyAndId tripId=new AgencyAndId("agency","1.1");
  ServiceDate serviceDate=new ServiceDate();
  TripUpdateList tripUpdateList=TripUpdateList.forCanceledTrip(tripId,0,serviceDate);
  updater.applyTripUpdateLists(Arrays.asList(tripUpdateList));
  TimetableResolver resolver=updater.getTimetableSnapshot();
  assertNotNull(resolver);
  assertSame(resolver,updater.getTimetableSnapshot());
  tripUpdateList=TripUpdateList.forCanceledTrip(tripId,0,serviceDate);
  updater.applyTripUpdateLists(Arrays.asList(tripUpdateList));
  assertSame(resolver,updater.getTimetableSnapshot());
  updater.setMaxSnapshotFrequency(-1);
  TimetableResolver newResolver=updater.getTimetableSnapshot();
  assertNotNull(newResolver);
  assertNotSame(resolver,newResolver);
}
