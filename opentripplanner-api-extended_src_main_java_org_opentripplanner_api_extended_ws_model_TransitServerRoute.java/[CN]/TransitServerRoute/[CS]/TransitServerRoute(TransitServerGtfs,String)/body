{
  Route route=transitServerGtfs.getRoute(routeId);
  List<Stop> stops=transitServerGtfs.getStopsForRoute(routeId);
  this.setId(routeId);
  this.setShortName(route.getShortName());
  this.setLongName(route.getLongName());
  this.setStops(new TransitServerStops(stops));
  this.setAgencyId(routeId);
  List<ShapePoint> shapePoints=transitServerGtfs.getShapePointsForRoute(routeId);
  int n=shapePoints.size();
  double[] lat=new double[n];
  double[] lon=new double[n];
  int i=0;
  for (  ShapePoint sp : shapePoints) {
    lat[i]=sp.getLat();
    lon[i]=sp.getLon();
    i++;
  }
  EncodedPolylineBean geometry=PolylineEncoder.createEncodings(lat,lon);
  this.geometry=geometry;
switch (route.getType()) {
case 0:
    this.setMode("TRAM");
  break;
case 1:
this.setMode("SUBWAY");
break;
case 2:
this.setMode("RAIL");
break;
case 3:
this.setMode("BUS");
break;
case 4:
this.setMode("FERRY");
break;
case 5:
this.setMode("CABLE_CAR");
break;
case 6:
this.setMode("GONDOLA");
break;
case 7:
this.setMode("FUNICULAR");
break;
default :
throw new IllegalArgumentException("unknown gtfs route type " + route.getType());
}
}
