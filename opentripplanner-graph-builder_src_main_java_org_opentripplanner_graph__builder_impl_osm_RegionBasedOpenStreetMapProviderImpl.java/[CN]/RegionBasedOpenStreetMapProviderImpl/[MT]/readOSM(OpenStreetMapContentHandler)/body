{
  if (_cacheDirectory != null)   getDownloader().setCacheDirectory(_cacheDirectory);
  DownloadHandler downloadHandler=new DownloadHandler(handler);
  try {
    int regionIndex=0;
    for (    Envelope region : _regionsSource.getRegions()) {
      getDownloader().visitRegion(region,downloadHandler);
      if (regionIndex % 100 == 0) {
        _log.debug("regions=" + regionIndex);
      }
      regionIndex++;
    }
  }
 catch (  IOException ex) {
    throw new IllegalStateException("error downloading osm",ex);
  }
}
