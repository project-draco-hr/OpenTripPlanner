{
  OSMDownloader downloader=new OSMDownloader();
  if (_cacheDirectory != null)   downloader.setCacheDirectory(_cacheDirectory);
  DownloadHandler downloadHandler=new DownloadHandler(handler);
  try {
    int regionIndex=0;
    for (    Envelope region : _regionsSource.getRegions()) {
      downloader.visitRegion(region,downloadHandler);
      _log.debug("regions=" + regionIndex);
      regionIndex++;
    }
  }
 catch (  IOException ex) {
    throw new IllegalStateException("error downloading osm",ex);
  }
}
