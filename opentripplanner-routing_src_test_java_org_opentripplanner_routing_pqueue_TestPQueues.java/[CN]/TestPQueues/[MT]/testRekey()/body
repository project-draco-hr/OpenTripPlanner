{
  final int N=50000;
  final int ITER=2;
  List<Double> keys;
  List<Integer> vals;
  keys=new ArrayList<Double>(N);
  vals=new ArrayList<Integer>(N);
  BinHeap<Integer> bh=new BinHeap<Integer>(20);
  for (int iter=0; iter < ITER; iter++) {
    bh.reset();
    for (int i=0; i < N; i++) {
      keys.add(i,(Math.random() * 10000));
      vals.add(i,(N - i) * 3);
    }
    for (int i=0; i < N; i++) {
      bh.insert(vals.get(i),keys.get(i));
    }
    System.out.printf("\nRekey %d elements\n",N);
    long t0=System.currentTimeMillis();
    for (int i=0; i < N; i++) {
      bh.rekey(vals.get(i),i * 2.0D + 10);
    }
    long t1=System.currentTimeMillis();
    double tSec=(t1 - t0) / 1000.0;
    System.out.printf("time %f sec\n",tSec);
    System.out.printf("time per rekey %f\n",tSec / N);
    System.out.printf("Comparing to expected results\n");
    for (int i=0; i < N; i++) {
      Double qp=bh.peek_min_key();
      Integer qi=bh.extract_min();
      assertEquals(qi,vals.get(i));
    }
    assertTrue(bh.empty());
  }
}
