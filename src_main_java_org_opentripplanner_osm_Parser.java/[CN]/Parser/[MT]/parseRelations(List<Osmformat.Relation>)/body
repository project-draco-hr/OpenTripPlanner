{
  StringBuilder sb=new StringBuilder();
  for (  Osmformat.Relation r : rels) {
    Relation rel=new Relation();
    sb.setLength(0);
    for (int k=0; k < r.getKeysCount(); k++) {
      String key=getStringById(r.getKeys(k));
      String val=getStringById(r.getVals(k));
      addTag(sb,key,val);
    }
    rel.tags=sb.toString();
    long mid=0;
    for (int m=0; m < r.getMemidsCount(); m++) {
      Relation.Member member=new Relation.Member();
      mid+=r.getMemids(m);
      member.id=mid;
      member.role=getStringById(r.getRolesSid(m));
switch (r.getTypes(m)) {
case NODE:
        member.type=Type.NODE;
      break;
case WAY:
    member.type=Type.WAY;
  break;
case RELATION:
member.type=Type.RELATION;
break;
default :
LOG.error("Relation type is unexpected.");
}
rel.members.add(member);
}
handleRelation(r.getId(),rel);
}
}
