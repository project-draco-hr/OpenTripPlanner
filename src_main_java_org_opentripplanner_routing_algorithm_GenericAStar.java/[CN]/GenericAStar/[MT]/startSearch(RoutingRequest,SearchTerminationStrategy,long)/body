{
  RunState runState=new RunState(options,terminationStrategy);
  runState.rctx=options.getRoutingContext();
  runState.spt=shortestPathTreeFactory.create(options);
  runState.heuristic=options.batch ? new TrivialRemainingWeightHeuristic() : runState.rctx.remainingWeightHeuristic;
  State initialState=new State(options);
  runState.heuristic.initialize(initialState,runState.rctx.target,abortTime);
  if (abortTime < Long.MAX_VALUE && System.currentTimeMillis() > abortTime) {
    LOG.warn("Timeout during initialization of interleaved bidirectional heuristic.");
    options.rctx.debugOutput.timedOut=true;
    return null;
  }
  runState.spt.add(initialState);
  int initialSize=runState.rctx.graph.getVertices().size();
  initialSize=(int)Math.ceil(2 * (Math.sqrt((double)initialSize + 1)));
  runState.pq=new BinHeap<State>(initialSize);
  runState.pq.insert(initialState,0);
  runState.nVisited=0;
  runState.targetAcceptedStates=Lists.newArrayList();
  return runState;
}
