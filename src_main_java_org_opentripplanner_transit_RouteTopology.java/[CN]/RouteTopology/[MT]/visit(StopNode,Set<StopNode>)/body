{
  if (node.visiting) {
    throw new CyclicGraphException();
  }
 else {
    node.visiting=true;
    for (    StopNode m : node.outgoing) {
      if (!visited.contains(m)) {
        visit(m,visited);
      }
    }
    node.visiting=false;
    visited.add(node);
    sortedNodes.add(node);
  }
}
