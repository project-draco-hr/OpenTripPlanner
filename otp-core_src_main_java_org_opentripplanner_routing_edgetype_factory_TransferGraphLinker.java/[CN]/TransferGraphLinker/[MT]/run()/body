{
  Map<AgencyAndId,TransitStop> stopNodes=new HashMap<AgencyAndId,TransitStop>();
  for (  Vertex v : graph.getVertices()) {
    if (v instanceof TransitStop) {
      TransitStop transitStop=(TransitStop)v;
      Stop stop=transitStop.getStop();
      stopNodes.put(stop.getId(),transitStop);
    }
  }
  for (  TransferTable.Transfer transfer : graph.getTransferTable().getAllFirstSpecificTransfers()) {
    TransitStop fromVertex=stopNodes.get(transfer.fromStopId);
    TransitStop toVertex=stopNodes.get(transfer.toStopId);
    double distance=distanceLibrary.distance(fromVertex.getCoordinate(),toVertex.getCoordinate());
    TransferEdge edge=null;
switch (transfer.seconds) {
case StopTransfer.FORBIDDEN_TRANSFER:
case StopTransfer.UNKNOWN_TRANSFER:
      break;
case StopTransfer.PREFERRED_TRANSFER:
case StopTransfer.TIMED_TRANSFER:
    edge=new TransferEdge(fromVertex,toVertex,distance);
  break;
default :
edge=new TransferEdge(fromVertex,toVertex,distance,transfer.seconds);
}
if (edge != null) {
LineString geometry=GeometryUtils.getGeometryFactory().createLineString(new Coordinate[]{fromVertex.getCoordinate(),toVertex.getCoordinate()});
edge.setGeometry(geometry);
}
}
}
