{
  ArrayList<String> notFound=new ArrayList<String>();
  Vertex fromVertex=getVertexForPlace(fromPlace,options);
  if (fromVertex == null) {
    notFound.add("from");
  }
  Vertex toVertex=getVertexForPlace(toPlace,options);
  if (toVertex == null) {
    notFound.add("to");
  }
  if (notFound.size() > 0) {
    throw new VertexNotFoundException(notFound);
  }
  Vertex origin=null;
  Vertex target=null;
  if (options.isArriveBy()) {
    origin=toVertex;
    target=fromVertex;
  }
 else {
    origin=fromVertex;
    target=toVertex;
  }
  State state=new State(targetTime.getTime(),origin,options);
  return plan(state,target,nItineraries);
}
