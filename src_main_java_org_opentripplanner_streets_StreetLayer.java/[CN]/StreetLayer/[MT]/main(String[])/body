{
  String osmSourceFile=args[0];
  OSM osm=new OSM(null);
  osm.intersectionDetection=true;
  osm.readFromFile(osmSourceFile);
  StreetLayer streetLayer=new StreetLayer();
  streetLayer.loadFromOsm(osm);
  osm.close();
  streetLayer.buildEdgeLists();
  try {
    OutputStream outputStream=new BufferedOutputStream(new FileOutputStream("test.out"));
    streetLayer.write(outputStream);
    outputStream.close();
    InputStream inputStream=new BufferedInputStream(new FileInputStream("test.out"));
    streetLayer=StreetLayer.read(inputStream);
    inputStream.close();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  streetLayer.testRouting(false);
  streetLayer.testRouting(true);
}
