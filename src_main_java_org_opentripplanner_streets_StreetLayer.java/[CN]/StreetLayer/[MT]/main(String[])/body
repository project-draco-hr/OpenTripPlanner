{
  String gtfsSourceFile=args[1];
  TransitLayer transitLayer=TransitLayer.fromGtfs(gtfsSourceFile);
  try {
    OutputStream outputStream=new BufferedOutputStream(new FileOutputStream("transit.layer"));
    transitLayer.write(outputStream);
    outputStream.close();
    InputStream inputStream=new BufferedInputStream(new FileInputStream("transit.layer"));
    transitLayer=TransitLayer.read(inputStream);
    inputStream.close();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  String osmSourceFile=args[0];
  OSM osm=new OSM(null);
  osm.intersectionDetection=true;
  osm.readFromFile(osmSourceFile);
  StreetLayer streetLayer=new StreetLayer();
  streetLayer.loadFromOsm(osm);
  osm.close();
  streetLayer.buildEdgeLists();
  streetLayer.indexStreets();
  streetLayer.linkTransitStops(transitLayer);
  try {
    OutputStream outputStream=new BufferedOutputStream(new FileOutputStream("streets.layer"));
    streetLayer.write(outputStream);
    outputStream.close();
    InputStream inputStream=new BufferedInputStream(new FileInputStream("streets.layer"));
    streetLayer=StreetLayer.read(inputStream);
    inputStream.close();
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
  streetLayer.testRouting(false,transitLayer);
  streetLayer.testRouting(true,transitLayer);
}
