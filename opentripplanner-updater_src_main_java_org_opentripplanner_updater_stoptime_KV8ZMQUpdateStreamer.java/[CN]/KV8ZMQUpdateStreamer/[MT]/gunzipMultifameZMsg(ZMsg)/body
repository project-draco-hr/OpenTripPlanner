{
  Iterator<ZFrame> frames=msg.iterator();
  frames.next();
  ByteArrayOutputStream buffer=new ByteArrayOutputStream();
  while (frames.hasNext()) {
    ZFrame frame=frames.next();
    byte[] frameData=frame.getData();
    buffer.write(frameData);
  }
  if (buffer.size() == 0) {
    LOG.debug("received 0-length CTX message {}",msg);
    return null;
  }
  InputStream gzippedMessageStream=new ByteArrayInputStream(buffer.toByteArray());
  InputStream messageStream=new GZIPInputStream(gzippedMessageStream);
  buffer.reset();
  byte[] b=new byte[4096];
  for (int n; (n=messageStream.read(b)) != -1; ) {
    buffer.write(b,0,n);
  }
  return buffer.toString();
}
