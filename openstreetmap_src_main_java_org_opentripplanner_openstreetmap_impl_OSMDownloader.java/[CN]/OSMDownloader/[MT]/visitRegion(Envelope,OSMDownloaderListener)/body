{
  double minY=floor(rectangle.getMinY(),_latYStep);
  double maxY=ceil(rectangle.getMaxY(),_latYStep);
  double minX=floor(rectangle.getMinX(),_lonXStep);
  double maxX=ceil(rectangle.getMaxX(),_lonXStep);
  for (double y=minY; y < maxY; y+=_latYStep) {
    for (double x=minX; x < maxX; x+=_lonXStep) {
      String key=getKey(x,y);
      File path=getPathToUpToDateMapTile(y,x,key);
      try {
        listener.handleMapTile(key,y,x,path);
      }
 catch (      IllegalStateException e) {
        LOG.debug("trying to re-download");
        path.delete();
        path=getPathToUpToDateMapTile(y,x,key);
        listener.handleMapTile(key,y,x,path);
      }
    }
  }
}
