{
  RaptorBoardSpec spec=new RaptorBoardSpec();
  spec.departureTime=0;
  spec.tripTimes=null;
  spec.patternIndex=-1;
  for (int i=0; i < alights[stopNo - 1].length; ++i) {
    TransitBoardAlight alight=alights[stopNo - 1][i];
    State state=new State(alight.getToVertex(),arrivalTime,request);
    State result=alight.traverse(state);
    if (result == null)     continue;
    int time=(int)result.getTime();
    if (time > spec.departureTime) {
      spec.departureTime=time;
      spec.tripTimes=result.getTripTimes();
      spec.patternIndex=i;
      spec.serviceDay=result.getServiceDay();
      spec.tripId=result.getTripId();
    }
  }
  if (spec.patternIndex == -1)   return null;
  return spec;
}
