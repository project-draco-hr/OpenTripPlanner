{
  Graph graph=graphService.getGraph();
  if (graph == null)   return;
  pedestrianIndex=new STRtree();
  index=new STRtree();
  for (  TurnVertex tv : IterableLibrary.filter(graph.getVertices(),TurnVertex.class)) {
    Geometry geom=tv.getGeometry();
    if (tv.getPermission().allows(StreetTraversalPermission.PEDESTRIAN)) {
      pedestrianIndex.insert(geom.getEnvelopeInternal(),tv);
    }
    index.insert(geom.getEnvelopeInternal(),tv);
  }
  pedestrianIndex.build();
  index.build();
  LOG.debug("spatial index size: {}",pedestrianIndex.size());
}
