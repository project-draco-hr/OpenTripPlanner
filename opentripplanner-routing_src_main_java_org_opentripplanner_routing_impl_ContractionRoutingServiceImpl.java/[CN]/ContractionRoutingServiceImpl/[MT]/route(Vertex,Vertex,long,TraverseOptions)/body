{
  ContractionHierarchySet hierarchies=_graphService.getContractionHierarchySet();
  ContractionHierarchy hierarchy=null;
  hierarchy=hierarchies.getHierarchy(options);
  int tries=0;
  while (tries < MAX_TRIES) {
    if (options.remainingWeightHeuristic != null) {
      options.remainingWeightHeuristic.reset();
    }
    tries+=1;
    if (hierarchy == null) {
      GenericAStar aStar=getAStarInstance(options);
      Graph _graph=hierarchies.getGraph();
      ShortestPathTree spt=aStar.getShortestPathTree(_graph,fromVertex,toVertex,time,options);
      if (spt == null) {
        return Collections.emptyList();
      }
      List<GraphPath> paths=null;
      if (options.isArriveBy())       paths=spt.getPaths(fromVertex,true);
 else       paths=spt.getPaths(toVertex,true);
      if (paths == null || paths.isEmpty()) {
        options.maxWalkDistance*=2;
        continue;
      }
 else {
        return paths;
      }
    }
    GraphPath path=hierarchy.getShortestPath(fromVertex,toVertex,time,options);
    if (path == null) {
      options.maxWalkDistance*=2;
      continue;
    }
 else {
      return Arrays.asList(path);
    }
  }
  return Collections.emptyList();
}
