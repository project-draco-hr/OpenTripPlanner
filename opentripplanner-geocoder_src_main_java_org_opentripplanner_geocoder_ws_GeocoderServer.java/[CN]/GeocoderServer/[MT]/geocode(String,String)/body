{
  if (address == null) {
    error("no address");
  }
  if (bbox != null) {
    String[] elem=bbox.split(",");
    if (elem.length == 4) {
      try {
        double x1=Double.parseDouble(elem[0]);
        double y1=Double.parseDouble(elem[1]);
        double x2=Double.parseDouble(elem[2]);
        double y2=Double.parseDouble(elem[3]);
        Envelope envelope=new Envelope(new Coordinate(x1,y1),new Coordinate(x2,y2));
        return geocoder.geocode(address,envelope);
      }
 catch (      NumberFormatException e) {
        error("bad bounding box: use left,top,right,bottom");
      }
    }
 else {
      error("bad bounding box: use left,top,right,bottom");
    }
  }
  return geocoder.geocode(address,null);
}
