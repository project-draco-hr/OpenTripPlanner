{
  Vertex v1=getVertexByCrossStreets("NW 10TH AVE","W BURNSIDE ST",false);
  Vertex v2=graph.getOutgoing(getVertexByCrossStreets("NE 21ST AVE","NE MASON ST",false)).iterator().next().getToVertex();
  Vertex v3=graph.getOutgoing(getVertexByCrossStreets("SE 82ND AVE","SE ASH ST",false)).iterator().next().getToVertex();
  Vertex v4=getVertexByCrossStreets("SE 92ND AVE","SE FLAVEL ST",true);
  Vertex[] vertices={v1,v2,v3,v4};
  assertNotNull(v1);
  assertNotNull(v2);
  assertNotNull(v3);
  assertNotNull(v4);
  ArrayList<String> intermediates=new ArrayList<String>();
  intermediates.add(v3.getLabel());
  intermediates.add(v2.getLabel());
  Date dateTime=DateUtils.toDate("2009-01-01","10:00:00");
  TraverseOptions options=new TraverseOptions();
  List<GraphPath> paths=pathService.plan(v1.getLabel(),v4.getLabel(),intermediates,dateTime,options);
  assertTrue(paths.size() > 0);
  GraphPath path=paths.get(0);
  int curVertex=0;
  for (  SPTVertex v : path.vertices) {
    if (v.mirror.equals(vertices[curVertex])) {
      curVertex+=1;
    }
  }
  assertEquals(4,curVertex);
}
