{
  Map<String,String> tags=entity.getTags();
  StreetTraversalPermission permission=null;
  String highway=tags.get("highway");
  String cycleway=tags.get("cycleway");
  String access=tags.get("access");
  String motorcar=tags.get("motorcar");
  String bicycle=tags.get("bicycle");
  String foot=tags.get("foot");
  if (access != null) {
    if ("no".equals(access) || "delivery".equals(access) || "agricultural".equals(access)|| "license".equals("access")) {
      permission=StreetTraversalPermission.NONE;
    }
 else {
      permission=def;
    }
  }
 else   if (motorcar != null || bicycle != null || foot != null) {
    permission=def;
  }
  if (motorcar != null) {
    if ("no".equals(motorcar) || "private".equals(motorcar)) {
      permission=permission.remove(StreetTraversalPermission.CAR);
    }
 else {
      permission=permission.add(StreetTraversalPermission.CAR);
    }
  }
  if (bicycle != null) {
    if ("no".equals(bicycle) || "private".equals(bicycle)) {
      permission=permission.remove(StreetTraversalPermission.BICYCLE);
    }
 else {
      permission=permission.add(StreetTraversalPermission.BICYCLE);
    }
  }
  if (foot != null) {
    if ("no".equals(foot) || "private".equals(foot)) {
      permission=permission.remove(StreetTraversalPermission.PEDESTRIAN);
    }
 else {
      permission=permission.add(StreetTraversalPermission.PEDESTRIAN);
    }
  }
  if (highway != null) {
    if ("construction".equals(highway)) {
      permission=StreetTraversalPermission.NONE;
    }
  }
 else {
    if ("construction".equals(cycleway)) {
      permission=StreetTraversalPermission.NONE;
    }
  }
  if (permission == null)   return def;
  return permission;
}
