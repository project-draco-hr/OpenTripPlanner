{
  String vertexLabel="link for " + v.getStopId();
  Vertex existing=graph.getVertex(vertexLabel);
  if (existing != null)   return existing;
  Coordinate coordinate=v.getCoordinate();
  List<Vertex> atIntersection=index.getIntersectionAt(coordinate);
  if (atIntersection != null) {
    Vertex linked=new GenericVertex(vertexLabel,coordinate.x,coordinate.y);
    graph.addVertex(linked);
    for (    Vertex i : atIntersection) {
      graph.addEdge(new FreeEdge(linked,i));
      graph.addEdge(new FreeEdge(i,linked));
    }
    return linked;
  }
  Collection<StreetEdge> edges=index.getClosestEdges(coordinate,options);
  if (edges == null || edges.size() < 2) {
    return null;
  }
  return createVertex(vertexLabel,edges,coordinate);
}
