{
  final TimeSurface surf=server.surfaceCache.get(surfaceId);
  if (surf == null)   return badRequest("Invalid TimeSurface ID.");
  final PointSet pset=server.pointSetCache.get(targetPointSetId);
  if (pset == null)   return badRequest("Missing or invalid target PointSet ID.");
  Graph gg=server.graphService.getGraph(surf.routerId);
  SampleSet samples=pset.getSampleSet(gg);
  final IndicatorLite indicator=new IndicatorLite(samples,surf);
  if (indicator == null)   return badServer("Could not compute indicator as requested.");
  return Response.ok().entity(new StreamingOutput(){
    @Override public void write(    OutputStream output) throws IOException, WebApplicationException {
      indicator.writeJson(output);
    }
  }
).build();
}
